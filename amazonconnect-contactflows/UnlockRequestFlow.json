{"modules":[{"id":"6e53ccd1-94bf-4f4e-a6c7-69d1f2b9cc20","type":"SetEventHook","branches":[{"condition":"Success","transition":"56c68908-9639-46aa-a217-8d1cc473a661"},{"condition":"Error","transition":"56c68908-9639-46aa-a217-8d1cc473a661"}],"parameters":[{"name":"Type","value":"CustomerRemaining"},{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:869632005839:instance/8c58af3b-36e3-41b1-bf79-e98012299c9f/contact-flow/481f2d8c-e192-408c-8bc1-315b4ddd7501","resourceName":"Sample disconnect flow"}],"metadata":{"position":{"x":185.5,"y":15.5},"useDynamic":false}},{"id":"d0048964-4756-44c0-9e2a-1aac86ea5e06","type":"CheckAttribute","branches":[{"condition":"NoMatch","transition":"1cf7e45d-7af2-4a51-8b46-58b899afac90"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"200","transition":"0d553fde-07de-4392-bee4-dbb4ae5ccf10"}],"parameters":[{"name":"Attribute","value":"status"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1315,"y":53},"conditionMetadata":[{"id":"3ebf656d-29cf-483f-a10f-761a141af03a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]}},{"id":"0d553fde-07de-4392-bee4-dbb4ae5ccf10","type":"PlayPrompt","branches":[{"condition":"Success","transition":"83b76e76-52cc-4732-81ff-1519b0c0f132"}],"parameters":[{"name":"Text","value":"Thank you for your entry.  Your code has been accepted.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1707,"y":112},"useDynamic":false}},{"id":"83b76e76-52cc-4732-81ff-1519b0c0f132","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2833,"y":374}}},{"id":"56c68908-9639-46aa-a217-8d1cc473a661","type":"StoreUserInput","branches":[{"condition":"Success","transition":"ab2da785-f261-4380-ae4b-43fdccb92f84"},{"condition":"Error","transition":"7c0a92c0-3a0d-4941-9d0e-2ae0e16ce58b"}],"parameters":[{"name":"Text","value":"Please enter your entry code. Press the pound key when you have finished.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":20},{"name":"EncryptEntry","value":false},{"name":"TerminatorDigits","value":"#","namespace":null},{"name":"DisableCancel","value":false}],"metadata":{"position":{"x":604,"y":27},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"1cf7e45d-7af2-4a51-8b46-58b899afac90","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"410","transition":"3f283df5-7501-4a64-85d3-0964df8a320c"},{"condition":"NoMatch","transition":"7c0a92c0-3a0d-4941-9d0e-2ae0e16ce58b"}],"parameters":[{"name":"Attribute","value":"errorCode"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1586,"y":305},"conditionMetadata":[{"id":"bb5ca276-1575-4c9e-baeb-d014e92cbd62","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"410"}]}},{"id":"7c0a92c0-3a0d-4941-9d0e-2ae0e16ce58b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"83b76e76-52cc-4732-81ff-1519b0c0f132"}],"parameters":[{"name":"Text","value":"We're sorry, an error occurred. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2509,"y":485},"useDynamic":false}},{"id":"ab2da785-f261-4380-ae4b-43fdccb92f84","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"d0048964-4756-44c0-9e2a-1aac86ea5e06"},{"condition":"Error","transition":"1cf7e45d-7af2-4a51-8b46-58b899afac90"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:869632005839:function:IoT-Buzzer-AmazonConnectWriteToIoTBuzzerRequest-1XDLHUMBW7OL7","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"EntryCode","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":1087,"y":40},"dynamicMetadata":{"EntryCode":true},"useDynamic":false},"target":"Lambda"},{"id":"013b8de0-0b5f-4f29-8e36-8c5ccdab5ac0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"83b76e76-52cc-4732-81ff-1519b0c0f132"}],"parameters":[{"name":"Text","value":"We're sorry. You have not entered the correct code. Please call back to try again.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2522,"y":686},"useDynamic":false}},{"id":"3f283df5-7501-4a64-85d3-0964df8a320c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0872ec64-1841-448c-9086-fb33e207992a"}],"parameters":[{"name":"Text","value":"You have entered an invalid code.  Please try again.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1881,"y":299},"useDynamic":false}},{"id":"0872ec64-1841-448c-9086-fb33e207992a","type":"Loop","branches":[{"condition":"Looping","transition":"56c68908-9639-46aa-a217-8d1cc473a661"},{"condition":"Complete","transition":"013b8de0-0b5f-4f29-8e36-8c5ccdab5ac0"}],"parameters":[{"name":"LoopCount","value":"2"}],"metadata":{"position":{"x":2231,"y":597},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"6e53ccd1-94bf-4f4e-a6c7-69d1f2b9cc20","metadata":{"entryPointPosition":{"x":15.5,"y":21.5},"snapToGrid":false,"name":"001. Unlock Request Flow","description":"Amazon Connect contact flow which guides the caller through a series of steps to authenticate their entry code to trigger AWS IoT to unlock a door.","type":"contactFlow","status":"published","hash":"8fa704c2203495e9687d1d56a310204c00c0290d088aac8fe332203133d16c98"}}